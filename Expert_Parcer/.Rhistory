u = "http://expert.ru/ratings/300-krupnejshih-proizvodstvennyih-kompanij-yuga-rossii-po-itogam-2016-goda/"
doc = htmlParse(u, encoding = "UTF8", asText = T)
if (!require("XML")) { install.packages("XML"); require("XML") }
if (!require("ggplot2")) { install.packages("ggplot2"); require("ggplot2") }
#if (!require("RCurl")) { install.packages("RCurl"); require("RCurl") }
if (!require("qdap")) { install.packages("qdap"); require("qdap") }
doc = htmlParse(u, encoding = "UTF8", asText = T)
tableNodes = getNodeSet(doc, "//table")
tb = readHTMLTable(tableNodes[[1]])
tableNodes[[1]]
htmlParse(u, encoding = "UTF8", asText = T)
doc = htmlParse(u, encoding = "UTF8", asText = T, isURL = T)
htmlParse(u, encoding = "UTF8", asText = T, isURL = T)
if (!require("RCurl")) { install.packages("RCurl"); require("RCurl") }
u = "http://expert.ru/ratings/300-krupnejshih-proizvodstvennyih-kompanij-yuga-rossii-po-itogam-2016-goda/"
doc = htmlParse(u, encoding = "UTF8", asText = T, isURL = T)
tableNodes = getNodeSet(doc, "//table")
tryAsInteger = function(val) {     #val = xmlValue(node)     ans = as.integer(gsub(",", ".", val))     if (is.na(ans))         val     else         ans     } del_ref = function(val) { genX(val, "[", "]") }
tb = readHTMLTable(tableNodes[[1]])
colnames(tb) = as.character( unlist( tb[1,] ) )
tb = tb[-c(1),]
doc = htmlParse( file = u, encoding = "UTF8", asText = T, isURL = T)
tableNodes = getNodeSet(doc, "//table")
u = "http://expert.ru/ratings/300-krupnejshih-proizvodstvennyih-kompanij-yuga-rossii-po-itogam-2016-goda/"
doc = htmlParse( file = u, encoding = "UTF8", asText = T, isURL = T)
tableNodes = getNodeSet(doc, "//table")
